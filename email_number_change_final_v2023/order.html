<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>비회원 주문</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="http://code.jquery.com/jquery-1.12.4.min.js"></script>
	<script src="jquery.number.min.js"></script>
</head>
<body>
<h1>주문하기</h1>
	
<form action="#" method="post">
	<fieldset>
		<legend>주문자 정보</legend>
		<p>
			<label for="username">성명</label>
			<input type="text" name="ordername" id="username" value="" placeholder="주문자명">			
		</p>
		<p>
			<label for="useremail">이메일</label>
			<input type="text" class="email_name" value=""> @
			<input type="text" class="email_domain" value="" disabled>
			<select class="select_domain">
				<option value="daum.net">daum</option>
				<option value="naver.com">naver</option>
				<option value="gmail.com">gmail</option>
				<option value="yahoo.com">yahoo</option>
				<option value="직접입력">직접입력</option>
			</select>
		</p>
	</fieldset>
	<fieldset>
		<legend>주문정보</legend>
		<p>
			<span>i pad mini 64GB</span>
			<span class="unitprice number">400000</span>원
			<span>
				<a href="#" id="minus"> - </a> / 
				<a href="#" id="plus"> + </a>
				개수: <em class="count number">1</em>
			</span>
			합계 : 
			<span class="total number">
				400000
			</span>원
		</p>
		<p>
		</p>
	</fieldset>	
</form>

<script>
	let selectDomain = $('.select_domain');
	let emailDomain = $('.email_domain');

	selectDomain.change(function(){
		let uservalue = $(this).val();
		emailDomain.val(uservalue);

		if(uservalue == '직접입력'){
			emailDomain.val('');
			emailDomain.prop('disabled', false);
			emailDomain.focus();
		}

	});

	//계산
	let unitprice = $('.unitprice').text();
	let plusBtn = $('#plus');
	let minusBtn = $('#minus');
	let count = $('.count');
	let total = $('.total');

	plusBtn.click(function(){
		let cc = count.text();
		count.text(++cc);
		total.text(unitprice*cc);
		//convertNum();
		$('.number').number( true, 0 );
	});
	minusBtn.click(function(){
		let cc = count.text();
		if(cc>1){
			count.text(--cc);
		}else{
			alert('상품수량은 1개 이하로 설정할 수 없습니다.');
		}
		total.text(unitprice*cc);
		//convertNum();
		$('.number').number( true, 0 );
	});

	// function convertNum(){
	// 	$('.number').each(function(){
	// 			let num = $(this).text().replace(',','');
	// 			let orgnum = parseInt(num).toLocaleString();
	// 			$(this).text(orgnum);
	// 	})
	// }
	//convertNum();

	$('.number').number( true, 0 );
</script>



</body>
</html>